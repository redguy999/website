<html>
	<head>
		<title>basic grid tester</title>
		<style>
			#movementGrid{
				margin:0;
				display:grid;
				/*grid-template-columns: auto auto auto auto auto; moved to JS*/
				max-width:99vw;
				width:99vw;
				max-height:98vh;
				height: 98vh;
			}
			#movementGrid>div{
				width:90%;
				max-width:90%;
				height:90%;
				max-height:90%;
				border:1px solid black;
				display: flex;
				justify-content: center;
				align-items: center;
			}
		</style>
	</head>
	<body onload="startGame()" onkeydown="keyPress()">
		<div id="movementGrid">

		</div>
	</body>
	<script>//for making the grid.
		const Mogrid = document.getElementById("movementGrid"); //shouldn't change
		let hT = 8//number of columns of tiles
		let wT = 10	//number of rows of tiles.
		/*
		debugger;
		//this pauses the website in chrome when "pause on exceptions is active." which can be set in the sources tab.
		*/

		//corrdinates as string "X,Y"; corrdinates as array ["X","Y"], array items can be either string or number
		//see function keyPress() for how movement works.
		function startGame(){
			makeGrid();
			resetLocDisplay()
			for(i=0;i<10;i++){
				let temp = getCorrdInGrid();
				console.log(temp)
				setBGColor(temp,"blue")
			}
			//addCorrdinates();for grid debugging
		}
		function makeGrid(){//DO NOT TOUCH THIS FUNCTION, OR YOU MIGHT BREAK EVERYTHING.
			let temp="";//
			let size = 100/wT;
			for(i=0;i<wT;i++){
				temp =  temp + size+"% ";//this and the next one is so that none of the tiles change size when the X moves to it.
			}
			document.getElementById("movementGrid").style.gridTemplateRows = temp;
			temp = "";
			size = 100/hT;
			for(i=0;i<hT;i++){
				temp = temp + size+"% ";
			}
			document.getElementById("movementGrid").style.gridTemplateColumns = temp;
			for(y=1;y<=wT;y++){
				for(x=1;x<=hT;x++){
					Mogrid.innerHTML = Mogrid.innerHTML + ('<div id="'+x+","+y+'"></div>');
				}
			}
		}
		/*to loop through every tiles, copy the nested for loops below:
			for(y=1;y<=wT;y++){
				for(x=1;x<=hT;x++){

				}
			}
		(x,y)*/
		function addCorrdinates(){//was used for debugging, currently useless.
			for(y=1;y<=wT;y++){
				for(x=1;x<=hT;x++){
					document.getElementById(x+","+y).innerHTML = "("+x+","+y+")"
				}
			}
		}
	</script>
	<script>//for making stuff appear on the grid.
		var walls = [];
		function getCorrdInGrid(){//gets you a string that is a corrdinate on the grid.
			let temp = Math.floor(Math.random()*hT)+1;
			let temp2 = Math.floor(Math.random()*wT)+1;
			return String(temp)+","+String(temp2);
		}
		function resetLocDisplay(){
			for(y=1;y<=wT;y++){
				for(x=1;x<=hT;x++){
					document.getElementById(x+","+y).innerHTML = "";
				}
			}
			document.getElementById(playerLoc).innerHTML = "X";
		}
		function setBGColor(tiles,color){//sets background colors; color must be a string, tiles must be a string or an array.
			if(typeof(color)=="undefined"){
				color = "white"//i hope this works.
			}else if(typeof(color)!="string"){
				throw "invalid input for parameter: color";
				return;
			}
			if(typeof(tiles)=="object"){//arrays are objects
				for(let i=0;i<tiles.length;i++){//assumes that all entries are strings.
					document.getElementById(tiles[i]).style.backgroundColor = color;
				}
			} else if(typeof(tiles)=="string"){
				document.getElementById(tiles).style.backgroundColor = color;
			} else {
				throw "invalid input for parameter: tile(s)";
				return;
			}
		}
		function CVM(corrdin){//check valid move
			for(let i=0;i<walls.length;i++){
				if(walls[i]==corrdin){
					return false;//invalid move
				}
				console.log(i);
			}
			if(!checkOoB(corrdin)){//not sure why i made it a function but it works.
				return false//invalid move
			}
		}
		function checkOoB(corrd){//check Out of Bounds
			let temp = corrd.split(",")
			if(temp[0]<1||temp[1]<1||temp[0]>wT||temp[1]>hT){
				return false;//outside grid
			}
			return true;//inside grid.
		}
	</script>

	<script>//for the player
		var playerLoc = "1,1"
		function keyPress(){
			key = window.event.keyCode;
			if(key==32){
				interact();
				return;//we don't need to do math on the location.
			}
			let temp = playerLoc.split(",");
			temp[0]=Number(temp[0]);
			temp[1]=Number(temp[1]);
			debugger;
			switch(key){//!!DO NOT EDIT, THIS WORKS CORRECTLY, copying the equations is recommended, however.
				case 40:
				temp[1]=temp[1]+1;//down
				break;
				case 39:
				temp[0]=temp[0]+1;//right
				break;
				case 38:
				temp[1]=temp[1]-1;//left
				break;
				case 37:
				temp[0]=temp[0]-1;//up
				break;
				default:
				//some random key was pressed.
				return;
			}
			temp=temp.toString();
			if(CVM(temp)){
				return;//move is invalid.
			}
			playerLoc=temp;
			resetLocDisplay()
		}
	</script>
</html>
